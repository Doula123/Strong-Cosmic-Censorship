<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exoplanet Classifier</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="space-bg">

  <nav class="navbar navbar-dark bg-transparent py-3">
    <div class="container">
      <h1 class="navbar-brand text-glow">üöÄ Exoplanet Classifier</h1>
    </div>
  </nav>

  <main class="container text-center mt-5">

    <div id="error-message-container" class="mt-3"></div>
     <!-- Explanation Section -->
    <div id="explanation-section" class="card p-4 mx-auto mb-4 result-card">
      <p class="text-light">
        This prediction tool uses an AI model to predict whether observed objects of interest should be classified as confirmed, candidate, or false positive exoplanets.
        Our algorithm uses the random tree classifier machine learning method, and is trained on the Kepler, K2 and TESS databases.
    <!-- Nested dropdown for images + text -->
          <details class="mt-3" style="width: 100%;">
      <summary class="text-light fw-bold">Model Details</summary>

      <div class="d-flex flex-wrap justify-content-around gap-3">

        <div class="card bg-dark text-light" style="width: 25rem;">
          <img src="graphs/CM_01.png" class="card-img-top" alt="Confusion Matrix" style="max-width:100%; height:auto;">
        </div>

        <div class="card bg-dark text-light" style="width: 25rem;">
          <img src="graphs/FI_01.png" class="card-img-top" alt="Feature Importances" style="max-width:100%; height:auto;">
        </div>

        <div class="card bg-dark text-light" style="width: 25rem;">
          <img src="graphs/ROC_01.png" class="card-img-top" alt="ROC Curve" style="max-width:100%; height:auto;">
        </div>
      <!-- Small explanatory paragraph -->
          <pre class="text-light mt-2 mb-3">
            Metrics obtained during model training using a RandomForestClassifier:
              Accuracy Score: 74.27%
              CV score: 0.7452

              The Parameters used to generate the model are:
              depth = 40
              features = sqrt
              min sample leaves = 1
              min samples split = 5
              n_estimators = 200
              random_state = 42
              training/testing split : 0.95/0.05
          </pre>
      </div>

    </details>


    </div>


    <div id="upload-section" class="card p-4 mx-auto upload-card">



      <h2 class="text-glow">CSV file upload</h2>
      <p class="text-light">For Kepler/K2/TESS-style datasets</p>


        <details>
        <summary class="text-light">File guidelines (drop-down menu)</summary>
          <ul class="text-light text-start">
           <li> <u>Need column</u>:</li>
              <ul>
                  <li> "planet_name" </li> <br>
              </ul>
          <li><u>Contain at least 3 of the following columns (use the given naming convention): </u></li>
              <ul>
                <li>"model_snr" (signal to noise ratio)</li>
                <li>"planet_rad" (planetary radius [in Earth radii])</li>
                <li>"depth" (transit depth [%])</li>
                <li>"impact" (impact parameter)</li>
                <li>"orb_period" (orbital period [days])</li>
                <li>"duration" (transit duration [hours])</li>
              </ul> <br>
            <li><u>Optional columns (increase model accuracy) :</u></li>
              <ul>
                <li>"planet_eq_temp" (planet equilibrium temperature [K])</li>
                <li>"stellar_teff" (stellar effective temperature [K])</li>
                <li>"planet_insol" (insolation flux [Earth flux])</li>
                <li>"stellar_rad" (stellar radius [Sun radii])</li>
                <li>"stellar_g_log" (stellar surface gravity [cm/s^2])</li>
              </ul>
            </u> <br>
            <li><u>Note:</u> </li>
                <ul>
                    <li>Empty cells in dataset will be filled using an iterative imputer algorithm.</li>
                    <li>Column order does not matter.</li>
                </ul>

        </p>
      </details>
        <br>

      <input type="file" id="csvFile" accept=".csv" class="form-control mb-3">
      <button id="predictBtn" class="btn btn-glow px-5">Predict</button>
      <div id="loading" class="mt-3 text-light d-none">‚è≥ Processing‚Ä¶</div>
      <br>

    </div>

    <div id="manual-input-section" class="card p-4 mx-auto upload-card">
      <h4 class="text-glow">Manual Input (instead of CSV)</h4>
      <p class="text-light text-start">Enter values for each column:</p>


      <div class="mb-3">
        <label for="planet_name" class="form-label text-light">Planet Name</label>
        <input type="text" id="planet_name" class="form-control" placeholder="e.g. Kepler-22b">
      </div>

      <h6 class="text-light">Fill at least 3:</h6>
      <div class="row g-2">
        <div class="col-md-6">
          <label class="form-label text-light">Signal to Noise Ratio</label>
          <input type="number" class="form-control" id="model_snr">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Planet Radius [Earth Radii]</label>
          <input type="number" class="form-control" id="planet_rad">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Transit Depth [%]</label>
          <input type="number" class="form-control" id="depth">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Impact Parameters</label>
          <input type="number" class="form-control" id="impact">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Orbital Period [Days]</label>
          <input type="number" class="form-control" id="orb_period">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Transit Duration [Hours]</label>
          <input type="number" class="form-control" id="duration">
        </div>
      </div>
      <br>
      <h6 class="text-light">Optional columns</h6>
      <div class="row g-2">
        <div class="col-md-6">
          <label class="form-label text-light">Planet Equilibrium Temperature [K]</label>
          <input type="number" class="form-control" id="planet_eq_temp">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Stellar Effective Temperature [K]</label>
          <input type="number" class="form-control" id="stellar_teff">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Insolation Flux [Earth Flux]</label>
          <input type="number" class="form-control" id="planet_insol">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Stellar Radius [Sun Radii]</label>
          <input type="number" class="form-control" id="stellar_rad">
        </div>
        <div class="col-md-6">
          <label class="form-label text-light">Stellar Surface Gravity [cm/s^2]</label>
          <input type="number" class="form-control" id="stellar_g_log">
        </div>
      </div>
      <br>
      <button id="inputPredictBtn" class="btn btn-glow px-5">Predict From Input</button>
    </div>

    <!-- Results Section -->
    <div id="results-section" class="d-none mt-5">

      <!-- Summary -->
      <div class="card p-4 mb-4 result-card">
        <h3 class="text-glow">Prediction Summary</h3>
        <div id="summary" class="text-light"></div>
      </div>

      <!-- Results Table -->
      <div  id="detailed-predictions-card" class="card p-4 result-card">
        <h4 class="text-glow">Detailed Predictions</h4>
        <div class="table-responsive">
          <table class="table table-dark table-striped" id="resultsTable">
            <thead></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

    </div>

      <!-- Credit Section -->
    <div id="explanation-section" class="card p-2 mx-auto mb-4 result-card">
      <h5 class="text-glow">Created by</h5>
      <p class="text-light">
        Philippe Michaud, Noah Frew, Liam Handfield, Eliot Galilee and Mathilde Pellegrin for the NASA 2025 Space Apps Hackathon
      </p>
    </div>

  </main>

  <script src="app.js"></script>
</body>
</html>